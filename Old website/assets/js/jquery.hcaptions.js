!function(a){var b=function(b,c){var e=a(b),f=e.clone(),g=e.attr("href"),h=a(e.attr("data-target")||g&&g.replace(/.*(?=#[^\s]+$)/,"")),i={};if(h.length||(h=e.next(c.data_selector)),h.length){if(this.set_from_attr(b,c),$wrap=a('<div class="drop-panel" />',{position:"relative","z-index":1,display:"block",overflow:"hidden"}).append(f).append(h),e.replaceWith($wrap),h.hide(),$wrap.css({position:"relative",overflow:"hidden",display:"block",padding:"2px"}),c.find_image&&e.not("img"))var j=$wrap.find("img"),k=j.width(),l=j.height();else var k=$wrap.outerWidth(),l=$wrap.outerHeight();var m=c.width||k,n=c.height||l;h.css({width:m,height:n,position:"absolute","z-index":33,overflow:"hidden"});var i={};if(c.overlay_bg&&(i.background=c.overlay_bg),c.overlay_opacity<1&&(i.opacity=c.overlay_opacity),i.left="left"==c.overlay_x?0:"right"==c.overlay_x?k-m:(k-m)/2+"px",i.top="top"==c.overlay_y?0:"bottom"==c.overlay_y?l-n:(l-n)/2+"px",h.css(i),"slide"==c.effect){var o={};switch(c.direction){case"top":o.top="-"+n+"px";break;case"bottom":o.top=l+"px";break;case"left":o.left="-"+m+"px";break;case"right":default:o.left=k+"px"}h.css("z-index",c.zindex+1).css(o),$wrap.hover(function(){h.show().stop(!0,!0).animate({top:i.top,left:i.left},+c.speed,c.onshow())},function(){h.show().stop(!0,!0).animate(o,+c.speed,c.onhide())})}else"fade"==c.effect?(h.css("z-index",c.zindex+1).hide(),$wrap.hover(function(){h.stop(!0,!0).fadeIn(+c.speed,c.onshow())},function(){h.stop(!0,!0).fadeOut(+c.speed,c.onhide())})):(h.css("z-index",c.zindex+1).hide(),$wrap.hover(function(){h.show(0,c.onshow())},function(){h.hide(0,c.onhide())}))}};b.prototype={constructor:b,set_from_attr:function(a,b){for(var d=a.attributes,e=d.length,f=0;f<e;f++)attr=d.item(f),/cap-/i.test(attr.nodeName)&&(b[attr.nodeName.replace("cap-","")]=attr.nodeValue)}},a.fn.hcaptions=function(c){return this.each(function(){var d=a(this),e=d.data("captions"),f=a.extend({},a.fn.hcaptions.defaults,d.data(),"object"==typeof c&&c);e||d.data("captions",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.hcaptions.defaults={data_selector:".cap-overlay",width:0,height:0,overlay_x:"center",overlay_y:"center",overlay_bg:"",overlay_opacity:1,effect:"slide",speed:400,direction:"top",zindex:2,find_image:!1,onshow:function(){},onhide:function(){}}}(jQuery);